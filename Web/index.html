<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="style.css">
    <title>RoomPing Pro</title>
</head>
<body>
    <div class="app-container">
        <div id="firewall-banner" class="firewall-banner" role="status">
            <span>When your firewall asks to allow this app, choose <strong>Allow</strong> (Private networks) so pings work. If you already blocked it, add RoomPingPro in Windows Security ‚Üí Firewall ‚Üí Allow an app.</span>
            <button type="button" class="firewall-dismiss" id="btn-dismiss-firewall" aria-label="Dismiss">√ó</button>
        </div>
        <header>
            <div class="header-top">
                <h1>RoomPing <span>Pro</span></h1>
                <div style="display:flex; gap:4px;">
                    <button class="icon-btn" type="button" id="btn-refresh-status" title="Refresh online status">üîÑ</button>
                    <button class="icon-btn" type="button" id="btn-settings">‚öôÔ∏è</button>
                </div>
            </div>
        
            <div id="my-profile" class="my-profile-card">
                <div class="profile-info">
                    <div style="display:flex; justify-content:space-between; align-items:center;">
                        <span class="label">My Device</span>
                        <button class="test-btn" type="button" id="btn-test-ping">Test Ping ‚ö°</button>
                    </div>
                    <h2 id="my-name">Detecting...</h2>
                    <div style="display:flex; align-items:center; gap:10px;">
                        <code style="color: #ff4b2b;">MAC: <span id="my-mac">--:--:--</span></code>
                        <button type="button" class="copy-btn" id="btn-copy-mac">üìã</button>
                    </div>
                    <p id="my-network" class="network-hint" style="margin:8px 0 0; font-size:11px; color:#888;"></p>
                </div>
            </div>
        </header>
    
        <main id="friends-list"></main>
    
        <footer>
            <button class="add-btn" type="button" id="btn-add-roommate">+ Add Roommate</button>
        </footer>

        <div id="debug-log-wrap" class="debug-log-wrap">
            <button type="button" class="debug-log-toggle" id="btn-debug-log" aria-expanded="false">
                <span class="debug-log-label">Connection / debug log</span>
                <span class="debug-log-badge" id="debug-log-badge">0</span>
                <span class="debug-log-chevron">‚ñº</span>
            </button>
            <div class="debug-log-panel" id="debug-log-panel" hidden>
                <div class="debug-log-toolbar">
                    <button type="button" class="debug-log-clear" id="btn-debug-clear">Clear</button>
                </div>
                <div class="debug-log-content" id="debug-log-content"></div>
            </div>
        </div>

        <div id="modal-overlay" class="modal-overlay" style="display:none;">
            <div class="modal">
                <h2>Add Roommate</h2>
                <label for="new-name">Name</label>
                <input type="text" id="new-name" placeholder="e.g. Alex">
                <label for="new-mac">MAC Address (we'll find their IP from this)</label>
                <input type="text" id="new-mac" placeholder="e.g. 50:eb:f6:7f:bf:8d" title="Enter the device MAC address, not the IP. The app finds the IP when on the same network.">
                <div class="modal-buttons">
                    <button type="button" class="cancel-btn" id="btn-modal-cancel">Cancel</button>
                    <button type="button" class="save-btn" id="btn-modal-add">Add</button>
                </div>
            </div>
        </div>

        <div id="settings-modal" class="modal-overlay" style="display:none;">
            <div class="modal">
                <h2>Settings</h2>
                <div class="setting-item">
                    <label>Audio Alerts</label>
                    <input type="checkbox" id="audio-toggle" checked onchange="toggleAudio()">
                </div>
                <div class="firewall-help">
                    <strong>Pings not working?</strong> Allow this app in your firewall for <strong>Private</strong> networks (UDP port 5005). Windows: Security ‚Üí Firewall ‚Üí Allow an app. If you clicked Block by mistake, add RoomPingPro there and check Private.
                </div>
                <div class="setting-item">
                    <button type="button" class="save-btn" id="btn-check-updates" style="width:100%;">Check for updates</button>
                </div>
                <button type="button" class="save-btn" id="btn-settings-close">Close</button>
            </div>
        </div>
    </div>

    <audio id="ping-sound" src="assets/alert.mp3"></audio>

    <script src="script.js"></script>
</body>
</html>